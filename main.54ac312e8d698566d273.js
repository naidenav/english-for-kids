(()=>{"use strict";var e={358:(e,t,n)=>{n.r(t)},76:(e,t,n)=>{n.r(t)},245:(e,t,n)=>{n.r(t)},762:(e,t,n)=>{n.r(t)},714:(e,t,n)=>{n.r(t)},850:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},954:(e,t,n)=>{n.r(t)},667:(e,t,n)=>{n.r(t)},847:(e,t,n)=>{n.r(t)},371:(e,t,n)=>{n.r(t)},410:(e,t,n)=>{n.r(t)},500:(e,t,n)=>{n.r(t)},731:(e,t,n)=>{n.r(t)},559:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},894:(e,t,n)=>{function i(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,i,e):t(r)}}}}n.r(t),n.d(t,{default:()=>o});var r=i();r.withExtraArgument=i;const o=r},676:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:()=>c,applyMiddleware:()=>v,bindActionCreators:()=>m,combineReducers:()=>h,compose:()=>g,createStore:()=>u});var s="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function l(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function u(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(a(1));return n(u)(e,t)}if("function"!=typeof e)throw new Error(a(2));var r=e,o=t,d=[],h=d,p=!1;function m(){h===d&&(h=d.slice())}function g(){if(p)throw new Error(a(3));return o}function v(e){if("function"!=typeof e)throw new Error(a(4));if(p)throw new Error(a(5));var t=!0;return m(),h.push(e),function(){if(t){if(p)throw new Error(a(6));t=!1,m();var n=h.indexOf(e);h.splice(n,1),d=null}}}function _(e){if(!l(e))throw new Error(a(7));if(void 0===e.type)throw new Error(a(8));if(p)throw new Error(a(9));try{p=!0,o=r(o,e)}finally{p=!1}for(var t=d=h,n=0;n<t.length;n++)(0,t[n])();return e}function f(e){if("function"!=typeof e)throw new Error(a(10));r=e,_({type:c.REPLACE})}function C(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(a(11));function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[s]=function(){return this},e}return _({type:c.INIT}),(i={dispatch:_,subscribe:v,getState:g,replaceReducer:f})[s]=C,i}function h(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i];"function"==typeof e[r]&&(n[r]=e[r])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:c.INIT}))throw new Error(a(12));if(void 0===n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var i=!1,r={},d=0;d<s.length;d++){var c=s[d],l=n[c],u=e[c],h=l(u,t);if(void 0===h)throw t&&t.type,new Error(a(14));r[c]=h,i=i||h!==u}return(i=i||s.length!==Object.keys(e).length)?r:e}}function p(e,t){return function(){return t(e.apply(this,arguments))}}function m(e,t){if("function"==typeof e)return p(e,t);if("object"!=typeof e||null===e)throw new Error(a(16));var n={};for(var i in e){var r=e[i];"function"==typeof r&&(n[i]=p(r,t))}return n}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error(a(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map((function(e){return e(r)}));return i=g.apply(void 0,s)(n.dispatch),o(o({},n),{},{dispatch:i})}}}},252:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCard=t.updateCard=t.uploadAudio=t.uploadImage=t.createCard=t.getCard=t.deleteCategory=t.updateCategoryName=t.updateCategoryInDB=t.createCategory=t.getCategory=t.resetStatistics=t.getAllCategories=t.getAccessToken=void 0;const r=n(601);t.getAccessToken=e=>i(void 0,void 0,void 0,(function*(){try{const t=yield fetch(`${r.BASE_URL}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}catch(e){throw new Error(e)}})),t.getAllCategories=(e=[])=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.BASE_URL}/categories${((e=[])=>e.length?`?${e.map((e=>`${e.key}=${e.value}`)).join("&")}`:"")(e)}`);return yield t.json()})),t.resetStatistics=()=>i(void 0,void 0,void 0,(function*(){const e=yield fetch(`${r.BASE_URL}/reset`,{method:"PUT"});return yield e.json()})),t.getCategory=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.BASE_URL}/categories/${e}`);return yield t.json()})),t.createCategory=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${r.BASE_URL}/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`},body:JSON.stringify({categoryName:e})})).json()})),t.updateCategoryInDB=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.BASE_URL}/categories/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.updateCategoryName=(e,n)=>i(void 0,void 0,void 0,(function*(){const i=yield t.getCategory(e),r={category:n,id:i.id,cards:i.cards};return yield t.updateCategoryInDB(r)})),t.deleteCategory=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.BASE_URL}/categories/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`}});return yield t.json()})),t.getCard=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r.BASE_URL}/categories/${e}/${t}`);return yield n.json()})),t.createCard=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.BASE_URL}/categories/${e.categoryId}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`},body:JSON.stringify(e)});return yield t.json()})),t.uploadImage=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch("https://alluring-glacier-28316.herokuapp.com/image",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`},body:e});return yield t.json()})),t.uploadAudio=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch("https://alluring-glacier-28316.herokuapp.com/audio",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`},body:e});return yield t.json()})),t.updateCard=e=>i(void 0,void 0,void 0,(function*(){yield fetch(`${r.BASE_URL}/categories/${e.categoryId}/${e.word}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`},body:JSON.stringify(e)})})),t.deleteCard=(e,t)=>i(void 0,void 0,void 0,(function*(){yield fetch(`${r.BASE_URL}/categories/${e}/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${sessionStorage.getItem("accessToken")}`}})}))},752:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(676),o=i(n(894)),a=n(428),s=n(445),d=n(583),c=n(550),l=n(362),u=n(0),h=n(366),p=n(53),m=n(21),g=n(125),v=n(718),_=n(750),f=n(695),C=n(861),y=n(591),w=n(22),E=n(601);t.App=class{constructor(e,t){this.rootElement=e,this.store=r.createStore(v.rootReducer,E.INITIAL_STATE,r.applyMiddleware(o.default)),this.rootElement.classList.add("train-mode"),this.categories=t,this.router=new _.Router(this),this.background=new s.Background,this.wrapper=new d.BaseComponent("div",["wrapper"]),this.header=new h.Header(this),this.progressBar=new m.ProgressBar,this.sidebar=new f.Sidebar(this),this.sidebar.renderList(t),this.summary=new y.Summary,this.container=new d.BaseComponent("div",["container"]),this.categoryModule=new l.CategoryModule,this.categoryModule.render(t),this.cardModule=new c.CardModule(this),this.footer=new u.Footer,this.statistics=new C.Statistics(this),this.popup=new p.Popup(this),this.adminModule=new a.AdminModule(this),this.rootElement.append(this.background.element,this.wrapper.element,this.sidebar.element,this.footer.element,this.popup.element),this.container.element.append(this.categoryModule.element),this.wrapper.element.append(this.header.element,this.progressBar.element,this.container.element),sessionStorage.getItem(E.ACCESS_TOKEN_KEY)&&(this.store.dispatch(g.setAdminMode()),w.showControlRoute(),this.sidebar.showLogOutBtn());const n=document.getElementById("mode-switcher__input");null==n||n.addEventListener("change",(()=>{const e=this.store.getState();e.isGameStarted&&(this.store.dispatch(g.breakGame(!0)),this.cardModule.finishGame(this));const t=n.checked?E.PLAY_MODE:E.TRAIN_MODE;this.store.dispatch(g.switchMode(t)),t===E.PLAY_MODE&&(Number(e.page)>=0||e.page===E.STATISTICS_PAGE)&&this.header.showGameBtn(),t===E.TRAIN_MODE&&(this.header.hideGameBtn(),setTimeout((()=>this.header.setStartGameBtn()),300))})),this.store.subscribe((()=>{const e=this.store.getState();w.updateMode(e,this),w.highlightActiveRoute(e.page)}))}}},428:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdminModule=void 0,n(358);const i=n(583),r=n(448),o=n(782);class a extends i.BaseComponent{constructor(e){super("div",["admin-module"]),this.navPanel=new i.BaseComponent("div",["admin-module__nav-panel"]),this.container=new i.BaseComponent("div",["admin-module__container"]),this.categoryEditor=new r.CategoryEditor(e),this.wordEditor=new o.WordEditor,this.element.append(this.navPanel.element,this.container.element),this.container.element.append(this.categoryEditor.element)}}t.AdminModule=a},445:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Background=void 0;const i=n(583);class r extends i.BaseComponent{constructor(){super("div"),this.element.setAttribute("id","bg-image"),this.element.innerHTML='\n    <?xml version="1.0" standalone="no"?>\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 220">\n    <path fill="#3af18d" fill-opacity="1" d="M0,96L30,85.3C60,75,120,53,180,69.3C240,85,300,\n    139,360,144C420,149,480,107,540,80C600,53,660,43,720,58.7C780,75,840,117,900,112C960,107,\n    1020,53,1080,69.3C1140,85,1200,171,1260,181.3C1320,192,1380,128,1410,96L1440,64L1440,0L1410,\n    0C1380,0,1320,0,1260,0C1200,0,1140,0,1080,0C1020,0,960,0,900,0C840,0,780,0,720,0C660,0,600,\n    0,540,0C480,0,420,0,360,0C300,0,240,0,180,0C120,0,60,0,30,0L0,0Z"></path>\n    </svg>\n    '}hide(){this.element.classList.contains("hidden")||this.element.classList.add("hidden")}show(){this.element.classList.contains("hidden")&&this.element.classList.remove("hidden")}}t.Background=r},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[],n=""){this.element=document.createElement(e),this.element.classList.add(...t),this.element.innerHTML=n}}},550:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CardModule=void 0;const r=n(601),o=n(583),a=n(977),s=n(125),d=n(22);class c extends o.BaseComponent{constructor(e){super("div",["card-module"]),this.cardList=[],this.element.addEventListener("click",(t=>{if(e.store.getState().mode===r.PLAY_MODE)return;const n=t.target.closest(".card-container");if(n&&!t.target.classList.contains("card__turn-btn")){const e=n.dataset.audio;e&&d.playAudio(e)}})),this.element.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){if(t.target.classList.contains("card__turn-btn")){const n=t.target.closest(".card-container"),i=e.store.getState(),{word:o}=n.dataset;null==n||n.classList.add("flipped"),null==n||n.addEventListener("mouseleave",(()=>{n.classList.remove("flipped")}),{once:!0}),o&&(yield d.updateStatistics(i.page,o,r.TRAIN_COUNT))}}))))}render(e,t,n){this.clearCardList(),t&&!n?t.cards.forEach((t=>{const n=new a.Card(t.image,t.word,t.translation,t.audioSrc,t.category,t.categoryId);e===r.PLAY_MODE&&n.hideTitile(),this.element.append(n.element),this.cardList.push(n)})):!t&&n&&n.forEach((t=>{e===r.PLAY_MODE&&t.hideTitile(),this.element.append(t.element),this.cardList.push(t)}))}clear(){var e;null===(e=this.element.firstElementChild)||void 0===e||e.remove(),this.element.firstElementChild&&this.clear()}clearCardList(){this.cardList=[]}hideTitles(){this.cardList.forEach((e=>e.hideTitile()))}showTitles(){this.cardList.forEach((e=>e.showTitile()))}startGame(e){return i(this,void 0,void 0,(function*(){const t=[...this.cardList].sort((()=>Math.random()-.5));e.store.dispatch(s.game(!0)),e.store.dispatch(s.removeMistakes()),yield d.cardsHandler(t,e,!0)}))}finishGame(e){e.store.dispatch(s.game(!1)),e.store.dispatch(s.setCurrentCard(null)),e.header.setStartGameBtn(),this.cardList.forEach((e=>e.removeTrueCard())),e.progressBar.clear()}}t.CardModule=c},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(76);const i=n(583);class r extends i.BaseComponent{constructor(e,t,n,r,o,a){super("div",["card-container"]),this.element.dataset.word=t,this.category=o,this.categoryId=a,this.word=t,this.translation=n,this.imageSrc=e,this.audioSrc=r,this.element.dataset.audio=r,this.card=new i.BaseComponent("div",["card"]),this.frontCard=new i.BaseComponent("div",["card__front"]),this.frontCard.element.style.background=`url('${e}') no-repeat`,this.backCard=new i.BaseComponent("div",["card__back"]),this.backCard.element.style.background=`url('${e}') no-repeat`,this.trueCard=new i.BaseComponent("div",["card__true"]),this.frontTitle=new i.BaseComponent("div",["card__front-title"],t),this.backTitle=new i.BaseComponent("div",["card__back-title"],n),this.turnBtn=new i.BaseComponent("div",["card__turn-btn"]),this.frontCard.element.append(this.trueCard.element,this.frontTitle.element),this.backCard.element.append(this.backTitle.element),this.frontTitle.element.append(this.turnBtn.element),this.card.element.append(this.frontCard.element,this.backCard.element),this.element.append(this.card.element)}hideTitile(){this.frontTitle.element.classList.add("hide-title")}showTitile(){this.frontTitle.element.classList.remove("hide-title")}getCategory(){return this.category}getCategoryId(){return this.categoryId}getWord(){return this.word}getTranslation(){return this.translation}getImageSrc(){return this.imageSrc}getAudioSrc(){return this.audioSrc}setTrueCard(){this.trueCard.element.classList.add("true_on"),this.element.classList.add("non-interactive")}removeTrueCard(){this.trueCard.element.classList.remove("true_on"),this.element.classList.remove("non-interactive")}}t.Card=r},381:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryCard=void 0,n(245);const i=n(583);class r extends i.BaseComponent{constructor(e){super("div",["category-card"]),this.element.setAttribute("id",`category-card-${e.id}`),this.element.innerHTML=`\n      <div class="category-card__main-view" id="main-view-${e.id}">\n        <p class="category-card__title" id="category-name-${e.id}">${e.category}</p>\n        <p class="category-card__words">Words: <span class="category-card__number">${e.cards.length}</span></p>\n        <div class="category-card__btn-wrapper">\n          <button class="category-card__update-btn" data-id="${e.id}">Update</button>\n          <button class="category-card__add-word-btn" data-id="${e.id}">Add word</button>\n        </div>\n        <div class="category-card__delete-btn" data-id="${e.id}"></div>\n      </div>\n      <div class="category-card__update-view" id="update-view-${e.id}">\n        <fieldset class="category-card__fieldset">\n          <legend class="category-card__legend">Category name:</legend>\n          <input class="category-card__input" type="text" value="${e.category}" id="category-name-input-${e.id}">\n        </fieldset>\n        <div class="category-card__btn-wrapper">\n          <button class="category-card__create-btn" data-id="${e.id}">Create</button>\n          <button class="category-card__cancel-btn" data-id="${e.id}">Cancel</button>\n        </div>\n      </div>\n    `}}t.CategoryCard=r},448:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryEditor=void 0,n(762);const r=n(252),o=n(583),a=n(381),s=n(22);class d extends o.BaseComponent{constructor(e){super("div",["category-editor"]),this.categoriesList=[],this.addCategoryCard=new o.BaseComponent("div",["add-category-card"]),this.addCategoryCard.element.innerHTML='\n      <p class="add-category-card__title">Add new Category</p>\n      <div class="add-category-card__plus-icon"></div>\n    ',this.element.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){yield s.eventHandler(t,e)})))),this.addCategoryCard.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield s.addCategory(),yield s.updateCategoriesLists(e)})))),this.element.addEventListener("scroll",(()=>{this.element.scrollTop+this.element.clientHeight>=this.element.scrollHeight&&this.increaseCategories(4)}))}render(){return i(this,void 0,void 0,(function*(){s.clear(this.element),this.categoriesList=yield r.getAllCategories(),this.element.append(this.addCategoryCard.element),this.increaseCategories(6)}))}increaseCategories(e){for(let t=0;t<e;t++){const e=this.categoriesList.shift();if(!e)break;{const t=new a.CategoryCard(e);document.querySelector(".add-category-card").before(t.element)}}}}t.CategoryEditor=d},119:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryIcon=void 0,n(714);const i=n(583);class r extends i.BaseComponent{constructor(e,t,n){super("a",["category"]),this.title=new i.BaseComponent("div",["category__title"],e),this.element.style.backgroundImage=`url('${t}')`,this.element.setAttribute("href",`#${n}`),this.element.append(this.title.element)}}t.CategoryIcon=r},362:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryModule=void 0;const r=n(583),o=n(119),a=i(n(140)),s=n(22);class d extends r.BaseComponent{constructor(){super("div",["category-module"])}render(e){s.clear(this.element),e.forEach((e=>{var t;const n=(null===(t=e.cards[3])||void 0===t?void 0:t.image)||a.default,i=new o.CategoryIcon(e.category,n,e.id);this.element.append(i.element)}))}}t.CategoryModule=d},0:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0,n(850);const i=n(583);class r extends i.BaseComponent{constructor(){super("footer",["footer"]),this.element.innerHTML='\n      <div class="footer__wrapper">\n        <a class="github" href="https://github.com/naidenav" target="_blank" rel="noopener noreferrer">github</a>\n        <p class="copyright">© 2021 English for kids</p>\n        <a class="rss" href="https://rs.school/js/" target="_blank" rel="noopener noreferrer">\n        </a>\n      </div>\n    '}}t.Footer=r},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(528);const i=n(583),r=n(22);class o extends i.BaseComponent{constructor(e){super("header",["header"]),this.sidebarBtn=new i.BaseComponent("button",["header__sidebar-btn"]),this.sidebarBtn.element.innerHTML='\n      <svg\n      width="45"\n      height="45"\n      viewBox="0 0 45 45"\n      fill="none"\n      xmlns="http://www.w3.org/2000/svg">\n        <line x1="5" y1="2.5" x2="40" y2="2.5" stroke="#333333" stroke-width="5"/>\n        <line x1="5" y1="13.5" x2="40" y2="13.5" stroke="#333333" stroke-width="5"/>\n        <line x1="5" y1="24.5" x2="40" y2="24.5" stroke="#333333" stroke-width="5"/>\n      </svg>\n    ',this.title=new i.BaseComponent("h1",["h1"],"English for kids"),this.gameBtn=new i.BaseComponent("button",["game-btn","game-btn-off"]),this.gameBtn.element.setAttribute("id","game-btn"),this.gameBtn.element.innerHTML='\n      <p class="game-btn__title">Start</p>\n      <div class="game-btn__repeat-image"></div>\n    ',this.modeSwitcher=new i.BaseComponent("div",["mode-switcher"]),this.modeSwitcher.element.innerHTML='\n      <input type="checkbox" id="mode-switcher__input">\n        <label class="mode-switcher__container" for="mode-switcher__input">\n            <span class="mode-switcher__circle"></span>\n            <span class="mode-switcher__train">Train</span>\n            <span class="mode-switcher__play">Play</span>\n        </label>\n    ',this.element.append(this.sidebarBtn.element,this.title.element,this.gameBtn.element,this.modeSwitcher.element),this.gameBtn.element.addEventListener("click",(()=>{const t=e.store.getState();t.isGameStarted||(e.cardModule.startGame(e),this.setRepeatBtn()),t.isGameStarted&&r.playAudio(t.currentCard.audioSrc)}))}showGameBtn(){this.gameBtn.element.classList.remove("game-btn-off")}hideGameBtn(){this.gameBtn.element.classList.add("game-btn-off")}setStartGameBtn(){this.gameBtn.element.classList.remove("game-btn_transform")}setRepeatBtn(){this.gameBtn.element.classList.add("game-btn_transform")}}t.Header=o},69:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0,n(954);const i=n(583);class r extends i.BaseComponent{constructor(e,t,n=!0,r,o,a){super("div",["register-input"]),this.fieldset=new i.BaseComponent("fieldset",["register-input__fieldset"]),this.legend=new i.BaseComponent("legend",["register-input__legend"],e),this.input=new i.BaseComponent("input",["register-input__input"]),this.validIcon=new i.BaseComponent("div",["register-input__valid-icon"]),this.element.append(this.fieldset.element),this.fieldset.element.append(this.legend.element,this.input.element,this.validIcon.element),t&&this.input.element.setAttribute("type",t),n&&this.input.element.setAttribute("required",""),r&&this.input.element.setAttribute("maxlength",r),a&&this.input.element.setAttribute("disabled",""),o&&this.input.element.setAttribute("id",o)}disable(){this.input.element.hasAttribute("disabled")||this.input.element.setAttribute("disabled","")}enable(){this.input.element.hasAttribute("disabled")&&this.input.element.removeAttribute("disabled")}}t.Input=r},53:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0,n(667);const r=n(583),o=n(69),a=n(601),s=n(125),d=n(252),c=n(22);class l extends r.BaseComponent{constructor(e){super("div",["cover","cover_hidden"]),this.popup=new r.BaseComponent("div",["popup"]),this.popupTitle=new r.BaseComponent("p",["popup__title"],"Log In"),this.loginInput=new o.Input("First Name:","text",!0,"30"),this.passwordInput=new o.Input("Last Name:","text",!0,"12"),this.loginBtn=new r.BaseComponent("button",["button_add-user"],"Log In"),this.loginBtn.element.setAttribute("type","submit"),this.cancelBtn=new r.BaseComponent("button",["button_cancel"],"Cancel"),this.cancelBtn.element.setAttribute("type","reset"),this.popupForm=new r.BaseComponent("form",["popup__form"]),this.popupForm.element.setAttribute("id","popup-form"),this.inputWrapper=new r.BaseComponent("div",["input-wrapper"]),this.buttonWrapper=new r.BaseComponent("div",["buttons-wrapper"]),this.element.append(this.popup.element),this.popup.element.append(this.popupTitle.element,this.popupForm.element),this.popupForm.element.append(this.inputWrapper.element,this.buttonWrapper.element),this.inputWrapper.element.append(this.loginInput.element,this.passwordInput.element),this.buttonWrapper.element.append(this.loginBtn.element,this.cancelBtn.element);const t=this.loginInput.input.element,n=this.passwordInput.input.element;this.cancelBtn.element.addEventListener("click",(()=>{this.hidePopup()})),this.loginBtn.element.addEventListener("click",(r=>i(this,void 0,void 0,(function*(){if(r.preventDefault(),t.value&&n.value)try{const i=yield d.getAccessToken({username:t.value,password:n.value});sessionStorage.setItem(a.ACCESS_TOKEN_KEY,i.accessToken),e.store.dispatch(s.setAdminMode()),c.showControlRoute(),e.sidebar.showLogOutBtn(),this.hidePopup()}catch(e){t.setCustomValidity("Wrong login or password"),n.setCustomValidity("Wrong login or password")}}))))}showPopup(){this.element.classList.add("popup_opacity-up"),this.element.classList.remove("cover_hidden"),this.element.addEventListener("animationend",(()=>{this.element.classList.remove("popup_opacity-up"),this.element.classList.remove("cover_hidden")}))}hidePopup(){this.element.classList.add("popup_opacity-down"),this.element.addEventListener("animationend",(()=>{this.element.classList.add("cover_hidden"),this.element.classList.remove("popup_opacity-down")}))}}t.Popup=l},21:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBar=void 0,n(847);const i=n(583),r=n(601);class o extends i.BaseComponent{constructor(){super("div",["progress-bar"])}rightChoice(){this.checkWidth();const e=new i.BaseComponent("div",["progress-bar__right-icon"]);this.element.append(e.element)}wrongChoice(){this.checkWidth();const e=new i.BaseComponent("div",["progress-bar__wrong-icon"]);this.element.append(e.element)}checkWidth(){var e;const t=this.element.clientWidth;this.element.children.length*r.PLACE_FOR_ICON+r.PLACE_FOR_ICON>t&&(null===(e=this.element.firstElementChild)||void 0===e||e.remove())}clear(){var e;null===(e=this.element.firstElementChild)||void 0===e||e.remove(),this.element.firstElementChild&&this.clear()}}t.ProgressBar=o},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeAdminMode=t.setAdminMode=t.removeMistakes=t.addMistake=t.breakGame=t.game=t.removeCurrentCard=t.setCurrentCard=t.setPage=t.switchMode=void 0;const i=n(951);t.switchMode=function(e){return{type:i.SWITCH_MODE,mode:e}},t.setPage=function(e){return{type:i.SET_PAGE,page:e}},t.setCurrentCard=function(e){return{type:i.SET_CURRENT_CARD,currentCard:e}},t.removeCurrentCard=function(){return{type:i.REMOVE_CURRENT_CARD}},t.game=function(e){return{type:i.GAME,isGameStarted:e}},t.breakGame=function(e){return{type:i.BREAK_GAME,isBreak:e}},t.addMistake=function(){return{type:i.ADD_MISTAKE}},t.removeMistakes=function(){return{type:i.REMOVE_MISTAKES}},t.setAdminMode=function(){return{type:i.SET_ADMIN_MODE}},t.removeAdminMode=function(){return{type:i.REMOVE_ADMIN_MODE}}},718:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rootReducer=void 0;const i=n(676),r=n(601),o=n(951);t.rootReducer=i.combineReducers({mode:function(e=r.INITIAL_STATE.mode,t){return t.type===o.SWITCH_MODE?t.mode:e},page:function(e=r.INITIAL_STATE.page,t){return t.type===o.SET_PAGE?t.page:e},currentCard:function(e=r.INITIAL_STATE.currentCard,t){return t.type===o.SET_CURRENT_CARD?t.currentCard:e},isGameStarted:function(e=r.INITIAL_STATE.isGameStarted,t){return t.type===o.GAME?t.isGameStarted:e},isBreak:function(e=r.INITIAL_STATE.isBreak,t){return t.type===o.BREAK_GAME?t.isBreak:e},mistakes:function(e=r.INITIAL_STATE.mistakes,t){return t.type===o.ADD_MISTAKE?e+1:t.type===o.REMOVE_MISTAKES?0:e},isAdmin:function(e=r.INITIAL_STATE.isAdmin,t){return t.type===o.SET_ADMIN_MODE||t.type!==o.REMOVE_ADMIN_MODE&&e}})},951:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVE_ADMIN_MODE=t.SET_ADMIN_MODE=t.REMOVE_MISTAKES=t.ADD_MISTAKE=t.BREAK_GAME=t.GAME=t.REMOVE_CURRENT_CARD=t.SET_CURRENT_CARD=t.SET_PAGE=t.SWITCH_MODE=void 0,t.SWITCH_MODE="SWITCH_MODE",t.SET_PAGE="SET_PAGE",t.SET_CURRENT_CARD="SET_CURRENT_CARD",t.REMOVE_CURRENT_CARD="REMOVE_CURRENT_CARD",t.GAME="GAME",t.BREAK_GAME="BREAK_GAME",t.ADD_MISTAKE="ADD_MISTAKE",t.REMOVE_MISTAKES="REMOVE_MISTAKES",t.SET_ADMIN_MODE="SET_ADMIN_MODE",t.REMOVE_ADMIN_MODE="REMOVE_ADMIN_MODE"},750:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const r=n(125),o=n(22);t.Router=class{constructor(e){window.onpopstate=()=>i(this,void 0,void 0,(function*(){const t=window.location.hash.slice(1);e.store.getState().isGameStarted&&(e.store.dispatch(r.breakGame(!0)),e.cardModule.finishGame(e)),e.store.dispatch(r.setPage(t)),e.background.show(),yield o.switchPage(e,t)}))}}},695:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sidebar=void 0,n(371);const i=n(583),r=n(125),o=n(601),a=n(22);class s extends i.BaseComponent{constructor(e){super("aside",["sidebar"]),this.isSidebarOpen=!1,this.sidebarWrapper=new i.BaseComponent("div",["sidebar__wrapper"]),this.list=new i.BaseComponent("ul",["sidebar__list"]),this.buttonWrapper=new i.BaseComponent("div",["register-btn-wrapper"]),this.logIn=new i.BaseComponent("button",["register-btn"],"Log In"),this.logOut=new i.BaseComponent("button",["register-btn","btn-hidden"],"Log Out"),this.buttonWrapper.element.append(this.logIn.element,this.logOut.element),this.sidebarWrapper.element.append(this.list.element),this.element.append(this.sidebarWrapper.element,this.buttonWrapper.element),e.header.sidebarBtn.element.addEventListener("click",(()=>{e.header.sidebarBtn.element.classList.contains("sidebar-btn_active")?this.hideSidebar(e):this.showSidebar(e)})),document.body.addEventListener("click",(t=>{!t.target.classList.contains("sidebar")&&this.isSidebarOpen&&this.hideSidebar(e)})),this.logIn.element.addEventListener("click",(()=>{e.popup.showPopup()})),this.logOut.element.addEventListener("click",(()=>{e.store.dispatch(r.removeAdminMode()),sessionStorage.removeItem(o.ACCESS_TOKEN_KEY),this.showLogInBtn(),a.hideControlRoute(),e.store.getState().page===o.CONTROL_PAGE&&(window.location.hash=`#${o.MAIN_PAGE}`)}))}renderList(e){this.clearList();const t=document.createElement("li");t.innerHTML=`<a href="#${o.CONTROL_PAGE}" id="categories-route" class="sidebar__link control-link btn-hidden">Control page</a>`;const n=document.createElement("li");n.innerHTML=`<a href="#${o.MAIN_PAGE}" id="main-route" class="sidebar__link main-link active-route">Main page</a>`,this.list.element.append(t,n),e.forEach((e=>{const t=document.createElement("li");t.innerHTML=`<a href="#${e.id}" id="${e.id}-route" class="sidebar__link">${e.category}</a>`,this.list.element.append(t)}));const i=document.createElement("li");i.innerHTML=`<a href="#${o.STATISTICS_PAGE}" id="statistics-route" class="sidebar__link statistics-link">Statistics</a>`,this.list.element.append(i)}clearList(){var e;null===(e=this.list.element.firstElementChild)||void 0===e||e.remove(),this.list.element.firstElementChild&&this.clearList()}showSidebar(e){this.element.style.transform="translateX(0)",e.header.sidebarBtn.element.classList.add("sidebar-btn_active"),this.element.addEventListener("transitionend",(()=>{this.isSidebarOpen=!0}))}hideSidebar(e){this.element.style.transform="translateX(-102%)",e.header.sidebarBtn.element.classList.remove("sidebar-btn_active"),this.element.addEventListener("transitionend",(()=>{this.isSidebarOpen=!1}))}showLogInBtn(){this.logIn.element.classList.contains("btn-hidden")&&(this.logIn.element.classList.remove("btn-hidden"),this.logOut.element.classList.add("btn-hidden"))}showLogOutBtn(){this.logOut.element.classList.contains("btn-hidden")&&(this.logOut.element.classList.remove("btn-hidden"),this.logIn.element.classList.add("btn-hidden"))}}t.Sidebar=s},861:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Statistics=void 0,n(410);const r=n(583),o=n(601),a=n(22),s=n(252);class d extends r.BaseComponent{constructor(e){super("div",["statistics"]),this.wrapper=new r.BaseComponent("div",["wrapper"]),this.btnWrapper=new r.BaseComponent("div",["statistics__btn-wrapper"]),this.trainDifficultBtn=new r.BaseComponent("button",["statistics__button"],"Train Difficult"),this.resetBtn=new r.BaseComponent("button",["statistics__button"],"Reset Statistics"),this.btnWrapper.element.append(this.trainDifficultBtn.element,this.resetBtn.element),this.statTable=new r.BaseComponent("table",["table"]),this.tBody=new r.BaseComponent("tbody",["t-body"]),this.trHeader=new r.BaseComponent("tr",["tr-header"]),this.thPosition=new r.BaseComponent("th",["th"],"№"),this.thCategory=new r.BaseComponent("th",["th"]),this.thCategory.element.innerHTML=`Category ${o.SORT_ARROW}`,this.thWord=new r.BaseComponent("th",["th"],"Word"),this.thWord.element.innerHTML=`Word ${o.SORT_ARROW}`,this.thTranslation=new r.BaseComponent("th",["th"],"Translation"),this.thTranslation.element.innerHTML=`Translation ${o.SORT_ARROW}`,this.thTrainCardsNum=new r.BaseComponent("th",["th"]),this.thTrainCardsNum.element.innerHTML=`${a.renderTableIcon("train")} ${o.SORT_ARROW}`,this.thPlayCardsNum=new r.BaseComponent("th",["th"]),this.thPlayCardsNum.element.innerHTML=`${a.renderTableIcon("play")} ${o.SORT_ARROW}`,this.thTrueCardsNum=new r.BaseComponent("th",["th"]),this.thTrueCardsNum.element.innerHTML=`${a.renderTableIcon("true-card")} ${o.SORT_ARROW}`,this.thTrueCardsPer=new r.BaseComponent("th",["th"]),this.thTrueCardsPer.element.innerHTML=`${a.renderTableIcon("percentage")} ${o.SORT_ARROW}`,this.element.append(this.btnWrapper.element,this.statTable.element),this.statTable.element.append(this.tBody.element),this.tBody.element.append(this.trHeader.element),this.trHeader.element.append(this.thPosition.element,this.thCategory.element,this.thWord.element,this.thTranslation.element,this.thTrainCardsNum.element,this.thPlayCardsNum.element,this.thTrueCardsNum.element,this.thTrueCardsPer.element),this.resetBtn.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const t=yield s.resetStatistics();e.statistics.render(t)})))),this.trainDifficultBtn.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){a.trainDifficultWords(e)}))))}clear(){var e;null===(e=this.trHeader.element.nextSibling)||void 0===e||e.remove(),this.trHeader.element.nextSibling&&this.clear()}addRecord(e,t){const n=a.createRecord(e,t);this.tBody.element.append(n)}render(e){return i(this,void 0,void 0,(function*(){let t;this.clear(),t=e||(yield s.getAllCategories());let n=0;t.forEach((e=>{e.cards.forEach((e=>{this.addRecord(e,n++)}))}))}))}}t.Statistics=d},591:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Summary=void 0,n(500);const i=n(583),r=n(125),o=n(22),a=n(601);class s extends i.BaseComponent{constructor(){super("div",["summary"]),this.image=new i.BaseComponent("div",["summary__image"]),this.title=new i.BaseComponent("p",["summary__title"]),this.element.append(this.title.element,this.image.element)}succes(e){this.clear(),this.image.element.classList.add("success-image"),this.title.element.innerHTML="Success!",o.navigate(this.element,e.container.element),o.playAudio(a.SUCCESS_AUDIO_SRC)}failure(e,t){this.clear(),this.image.element.classList.add("failure-image"),this.title.element.innerHTML=`You made <span class="mistakes">${e}</span> mistakes`,o.navigate(this.element,t.container.element),o.playAudio(a.FAILURE_AUDIO_SRC),t.store.dispatch(r.removeMistakes())}clear(){this.image.element.classList.contains("succes-image")&&this.image.element.classList.remove("succes-image"),this.image.element.classList.contains("failure-image")&&this.image.element.classList.remove("failure-image"),this.title.element.innerHTML=""}}t.Summary=s},22:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.eventHandler=t.updateCategory=t.getNameInputValue=t.removeCategory=t.addCategory=t.updateCategoryCard=t.deleteWord=t.updateWordCard=t.switchPage=t.removeCardEditMode=t.setCardEditMode=t.clear=t.updateCategoriesLists=t.hideControlRoute=t.showControlRoute=t.trainDifficultWords=t.getRandomDifficultWords=t.createRecord=t.cardsHandler=t.updateStatistics=t.getNewWord=t.getNewCategory=t.getCardInfo=t.highlightActiveRoute=t.navigate=t.renderTableIcon=t.playAudio=t.updateMode=t.getAllWords=void 0;const r=n(601),o=n(252),a=n(583),s=n(977),d=n(381),c=n(125);t.getAllWords=()=>i(void 0,void 0,void 0,(function*(){return(yield o.getAllCategories()).map((e=>e.cards)).reduce(((e,t)=>e.concat(t)),[])})),t.updateMode=(e,t)=>{e.mode===r.PLAY_MODE?(document.body.classList.contains(r.TRAIN_MODE)&&(document.body.classList.remove(r.TRAIN_MODE),document.body.classList.add(r.PLAY_MODE)),t.cardModule.hideTitles()):e.mode===r.TRAIN_MODE&&(document.body.classList.contains(r.PLAY_MODE)&&(document.body.classList.remove(r.PLAY_MODE),document.body.classList.add(r.TRAIN_MODE)),t.cardModule.showTitles())},t.playAudio=e=>{const t=new Audio;t.src=e,t.currentTime=0,t.play()},t.renderTableIcon=e=>`\n    <div class="table-icon ${e}-icon"></div>\n  `,t.navigate=(e,t)=>{const n=t.firstElementChild;n&&t.replaceChild(e,n)},t.highlightActiveRoute=e=>{const t=document.querySelector(".active-route");null==t||t.classList.remove("active-route");let n=e;n.includes("/")&&([n]=n.split("/"));const i=document.getElementById(`${n}-route`);null==i||i.classList.add("active-route")},t.getCardInfo=e=>({category:e.getCategory(),categoryId:e.getCategoryId(),word:e.getWord(),translation:e.getTranslation(),image:e.getImageSrc(),audioSrc:e.getAudioSrc(),trainModeTurns:0,trueChoices:0,falseChoices:0,trueChoicesPer:0}),t.getNewCategory=(e,t)=>({category:e,id:t,cards:[]}),t.getNewWord=(e,t)=>({category:e.category,categoryId:e.id,word:`Word-${t}`,translation:"Слово",image:"https://res.cloudinary.com/naidenav/image/upload/v1625834746/efk-files/img/image-placeholder_yxuvx1.jpg",audioSrc:"https://res.cloudinary.com/naidenav/video/upload/v1625834476/efk-files/audio/word_lpfgpi.mp3",trainModeTurns:0,falseChoices:0,trueChoices:0,trueChoicesPer:0}),t.updateStatistics=(e,t,n)=>i(void 0,void 0,void 0,(function*(){if(e===r.STATISTICS_PAGE)return;const i=Number(e),a=yield o.getCategory(i),{cards:s}=a,d=s.findIndex((e=>e.word===t));switch(n){case r.TRAIN_COUNT:s[d].trainModeTurns+=1;break;case r.TRUE_COUNT:s[d].trueChoices+=1,(e=>{const{falseChoices:t}=e,{trueChoices:n}=e;e.trueChoicesPer=Math.round(n/(n+t)*100)})(s[d]);break;case r.FALSE_COUNT:s[d].falseChoices+=1;break;case r.TRUE_PER_COUNT:s[d].trueChoicesPer+=1}const c={category:a.category,id:a.id,cards:a.cards};yield o.updateCategoryInDB(c)})),t.cardsHandler=(e,n,o)=>i(void 0,void 0,void 0,(function*(){const a=t.getCardInfo(e[0]);let s=n.store.getState();s.currentCard!==a&&(n.store.dispatch(c.setCurrentCard(a)),o&&setTimeout((()=>t.playAudio(e[0].getAudioSrc())),500)),n.cardModule.element.addEventListener("click",(o=>i(void 0,void 0,void 0,(function*(){if(s=n.store.getState(),s.isBreak)return void n.store.dispatch(c.breakGame(!1));const i=o.target.closest(".card-container");i&&i!==e[0].element?(function(e){t.playAudio(r.ERROR_AUDIO_SRC),e.progressBar.wrongChoice(),e.store.dispatch(c.addMistake())}(n),yield t.updateStatistics(s.page,a.word,r.FALSE_COUNT),t.cardsHandler(e,n,!1)):i&&i===e[0].element?(function(e,n){t.playAudio(r.CORRECT_AUDIO_SRC),e.progressBar.rightChoice(),n.setTrueCard()}(n,e[0]),yield t.updateStatistics(s.page,a.word,r.TRUE_COUNT),e.length>1?(e.shift(),t.cardsHandler(e,n,!0)):(n.cardModule.finishGame(n),n.header.hideGameBtn(),s=n.store.getState(),s.mistakes?n.summary.failure(s.mistakes,n):n.summary.succes(n),setTimeout((()=>{window.location.hash=`#${r.MAIN_PAGE}`}),4e3))):t.cardsHandler(e,n,!1)}))),{once:!0})})),t.createRecord=(e,t)=>{const n=new a.BaseComponent("tr",["tr-body"]),i=new a.BaseComponent("td",["td"],`${t+1}.`),r=new a.BaseComponent("td",["td"],`${e.category}`),o=new a.BaseComponent("td",["td"],`${e.word}`),s=new a.BaseComponent("td",["td"],`${e.translation}`),d=new a.BaseComponent("td",["td"],`${e.trainModeTurns}`),c=new a.BaseComponent("td",["td"],`${e.trueChoices}`),l=new a.BaseComponent("td",["td"],`${e.falseChoices}`),u=new a.BaseComponent("td",["td"],`${e.trueChoicesPer}`);return n.element.append(i.element,r.element,o.element,s.element,d.element,c.element,l.element,u.element),n.element},t.getRandomDifficultWords=()=>i(void 0,void 0,void 0,(function*(){const e=yield t.getAllWords(),n=[];return e.forEach((e=>{e.trueChoicesPer>0&&e.trueChoicesPer<100&&n.push(e)})),n.sort(((e,t)=>e.trueChoicesPer>t.trueChoicesPer?1:-1)),n.length<=8?n:n.slice(0,8)})),t.trainDifficultWords=e=>i(void 0,void 0,void 0,(function*(){const n=yield t.getRandomDifficultWords();if(n){const i=n.map((e=>new s.Card(e.image,e.word,e.translation,e.audioSrc,e.category,e.categoryId)));if(i){i.sort((()=>Math.random()-.5));const n=e.store.getState();e.cardModule.clear(),e.cardModule.clearCardList(),e.cardModule.render(n.mode,void 0,i),t.navigate(e.cardModule.element,e.container.element)}}})),t.showControlRoute=()=>{const e=document.getElementById("categories-route");(null==e?void 0:e.classList.contains("btn-hidden"))&&e.classList.remove("btn-hidden")},t.hideControlRoute=()=>{const e=document.getElementById("categories-route");(null==e?void 0:e.classList.contains("btn-hidden"))||null==e||e.classList.add("btn-hidden")},t.updateCategoriesLists=e=>i(void 0,void 0,void 0,(function*(){const n=yield o.getAllCategories();e.sidebar.renderList(n),t.showControlRoute(),e.categoryModule.render(n)})),t.clear=e=>{var n;null===(n=e.firstElementChild)||void 0===n||n.remove(),e.firstElementChild&&t.clear(e)},t.setCardEditMode=e=>{const t=document.getElementById(`main-view-${e}`),n=document.getElementById(`update-view-${e}`);(null==t?void 0:t.classList.contains("show-update-view"))||(null==t||t.classList.add("show-update-view"),null==n||n.classList.add("show-update-view"))},t.removeCardEditMode=e=>{const t=document.getElementById(`main-view-${e}`),n=document.getElementById(`update-view-${e}`);(null==t?void 0:t.classList.contains("show-update-view"))&&(null==n||n.classList.remove("show-update-view"),null==t||t.classList.remove("show-update-view"))},t.switchPage=(e,n)=>i(void 0,void 0,void 0,(function*(){const a=e.store.getState();switch(n){case r.MAIN_PAGE:a.mode===r.PLAY_MODE&&e.header.hideGameBtn(),t.navigate(e.categoryModule.element,e.container.element);break;case r.STATISTICS_PAGE:e.background.hide(),e.statistics.render(),t.navigate(e.statistics.element,e.container.element);break;default:!function(e,n,a){i(this,void 0,void 0,(function*(){const i=new RegExp(`^${r.CONTROL_PAGE}/\\d+$`),s=new RegExp(`^${r.CONTROL_PAGE}$`);if(new RegExp("^\\d+$").test(n)){a.mode===r.PLAY_MODE&&e.header.showGameBtn(),e.cardModule.clear(),t.navigate(e.cardModule.element,e.container.element);const i=Number(n),s=yield o.getCategory(i);e.cardModule.render(a.mode,s)}else if(i.test(n)&&a.isAdmin){const i=Number(n.split("/")[1]);t.navigate(e.adminModule.element,e.container.element),t.navigate(e.adminModule.wordEditor.element,e.adminModule.container.element),e.adminModule.wordEditor.render(i)}else s.test(n)&&a.isAdmin?(t.navigate(e.adminModule.element,e.container.element),t.navigate(e.adminModule.categoryEditor.element,e.adminModule.container.element),e.adminModule.categoryEditor.render()):window.location.hash=`#${r.MAIN_PAGE}`}))}(e,n,a)}})),t.updateWordCard=(e,t)=>{const n=document.getElementById(`word-card-${t}`),i=null==n?void 0:n.querySelector(`.${r.CLASS_NAMES.audio}`),o=null==n?void 0:n.querySelector(`.${r.CLASS_NAMES.image}`),a=null==n?void 0:n.querySelector(`.${r.CLASS_NAMES.word}`),s=null==n?void 0:n.querySelector(`.${r.CLASS_NAMES.translation}`);i.dataset.src=e.audioSrc,o.style.backgroundImage=`url('${e.image}')`,a.innerHTML=e.word,s.innerHTML=e.translation},t.deleteWord=(e,t)=>i(void 0,void 0,void 0,(function*(){yield o.deleteCard(e.id,t);const n=document.getElementById(`${r.CLASS_NAMES.wordCard}-${t}`);null==n||n.remove()})),t.updateCategoryCard=e=>{document.getElementById(`category-name-${e.id}`).innerHTML=`${e.category}`},t.addCategory=()=>i(void 0,void 0,void 0,(function*(){const e=yield o.createCategory("New Category"),n=new d.CategoryCard(t.getNewCategory("New Category",e.id));document.querySelector(".add-category-card").before(n.element)})),t.removeCategory=e=>i(void 0,void 0,void 0,(function*(){yield o.deleteCategory(Number(e));const t=document.getElementById(`${r.CLASS_NAMES.categoryCard}-${e}`);null==t||t.remove()})),t.getNameInputValue=e=>document.getElementById(`category-name-input-${e}`).value,t.updateCategory=(e,n)=>i(void 0,void 0,void 0,(function*(){const i=t.getNameInputValue(n);if(t.getNameInputValue(n)){const r=yield o.updateCategoryName(Number(n),i);t.updateCategoryCard(r),yield t.updateCategoriesLists(e)}})),t.eventHandler=(e,n)=>i(void 0,void 0,void 0,(function*(){const i=e.target,{id:o}=i.dataset;if(o)switch(i.className){case r.CLASS_NAMES.addWordBtn:return void(window.location.hash=`#${r.CONTROL_PAGE}/${o}`);case r.CLASS_NAMES.cancelBtn:return void t.removeCardEditMode(o);case r.CLASS_NAMES.createBtn:return yield t.updateCategory(n,o),void t.removeCardEditMode(o);case r.CLASS_NAMES.deleteBtn:return yield t.removeCategory(o),void(yield t.updateCategoriesLists(n));case r.CLASS_NAMES.updateBtn:t.setCardEditMode(o)}}))},300:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WordCard=void 0,n(731);const i=n(583);class r extends i.BaseComponent{constructor(e){super("div",["word-card"]),this.element.setAttribute("id",`word-card-${e.word}`),this.element.innerHTML=`\n      <div class="word-card__main-view" id="main-view-${e.word}">\n        <div class="word-card__title-wrapper">\n          <p class="word-card__title">Word: </p>\n          <p class="word-card__word">${e.word}</p>\n        </div>\n        <div class="word-card__title-wrapper">\n          <p class="word-card__title">Translation: </p>\n          <p class="word-card__translation">${e.translation}</p>\n        </div>\n        <div class="word-card__title-wrapper">\n          <p class="word-card__title">Audio: </p>\n          <div class="word-card__audio" data-word="${e.word}" data-src="${e.audioSrc}"></div>\n        </div>\n        <div class="word-card__title-wrapper">\n          <p class="word-card__title">Image: </p>\n        </div>\n        <div class="word-card__image" style="background-image: url('${e.image}');"></div>\n        <button class="word-card__change-btn" data-word="${e.word}">Change</button>\n        <div class="word-card__delete-btn" data-word="${e.word}"></div>\n      </div>\n      <div class="word-card__update-view" id="update-view-${e.word}">\n        <fieldset class="word-card__fieldset">\n          <legend class="word-card__legend">Word:</legend>\n          <input class="word-card__input" type="text" value="${e.word}" id="card-word-input-${e.word}">\n        </fieldset>\n        <fieldset class="word-card__fieldset">\n          <legend class="word-card__legend">Translation:</legend>\n          <input class="word-card__input" type="text" value="${e.translation}" id="card-translation-input-${e.word}">\n        </fieldset>\n        <div class="file-input">\n          <p class="file-input__title">Sound: </p>\n          <label class="file-input__label" for="audio-input-${e.word}"></label>\n          <input type="file" class="file-input__input" id="audio-input-${e.word}">\n        </div>\n        <div class="file-input">\n          <p class="file-input__title">Image: </p>\n          <label class="file-input__label" for="image-input-${e.word}"></label>\n          <input type="file" class="file-input__input" id="image-input-${e.word}">\n        </div>\n        <button class="word-card__save-btn" data-word="${e.word}">Save</button>\n        <button class="word-card__cancel-btn" data-word="${e.word}">Cancel</button>\n      </div>\n    `}}t.WordCard=r},782:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WordEditor=void 0,n(559);const r=n(252),o=n(583),a=n(601),s=n(22),d=n(300);class c extends o.BaseComponent{constructor(){super("div",["word-editor"]),this.currentCategory=null,this.wordsList=[],this.addWordCard=new o.BaseComponent("div",["add-word-card"]),this.addWordCard.element.innerHTML='\n      <p class="add-word-card__title">Add new Word</p>\n      <div class="add-word-card__plus-icon"></div>\n    ',this.element.addEventListener("click",(e=>i(this,void 0,void 0,(function*(){yield this.eventHandler(e)})))),this.addWordCard.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield this.addWord()})))),this.element.addEventListener("scroll",(()=>{this.element.scrollTop+this.element.clientHeight>=this.element.scrollHeight&&this.increaseWords(4)}))}render(e){return i(this,void 0,void 0,(function*(){s.clear(this.element);const t=yield r.getCategory(e);this.currentCategory=t,this.wordsList=t.cards,this.element.append(this.addWordCard.element),this.increaseWords(4)}))}increaseWords(e){for(let t=0;t<e;t++){const e=this.wordsList.shift();if(!e)break;{const t=new d.WordCard(e);document.querySelector(".add-word-card").before(t.element)}}}addWord(){return i(this,void 0,void 0,(function*(){if(this.currentCategory){const e=document.querySelectorAll(`.${a.CLASS_NAMES.wordCard}`).length,t=s.getNewWord(this.currentCategory,e),n=yield r.createCard(t),i=new d.WordCard(n);document.querySelector(".add-word-card").before(i.element)}}))}getUpdatedCardInfo(e){var t;return i(this,void 0,void 0,(function*(){const n=document.getElementById(`card-word-input-${e}`),i=document.getElementById(`card-translation-input-${e}`),o=document.getElementById(`image-input-${e}`),a=new FormData,d=o.files[0];let c;d&&(a.append("image",d),c=(yield r.uploadImage(a)).secure_url);const l=document.getElementById(`audio-input-${e}`),u=new FormData,h=null===(t=l)||void 0===t?void 0:t.files[0];let p;if(h&&(u.append("audio",h),p=(yield r.uploadAudio(u)).secure_url),null!==this.currentCategory){const e=s.getNewWord(this.currentCategory,1);return p&&(e.audioSrc=p),c&&(e.image=c),n&&(e.word=n.value),i&&(e.translation=i.value),e}}))}eventHandler(e){return i(this,void 0,void 0,(function*(){const t=e.target,{word:n}=t.dataset;if(n)switch(t.className){case a.CLASS_NAMES.saveBtn:return void this.saveCard(n);case a.CLASS_NAMES.audio:return void(t.dataset.src&&s.playAudio(t.dataset.src));case a.CLASS_NAMES.changeBtn:return void s.setCardEditMode(n);case a.CLASS_NAMES.wordDeleteBtn:return void(this.currentCategory&&(yield s.deleteWord(this.currentCategory,n)));case a.CLASS_NAMES.wordCancelBtn:s.removeCardEditMode(n)}}))}saveCard(e){return i(this,void 0,void 0,(function*(){const t=yield this.getUpdatedCardInfo(e);t&&(s.updateWordCard(t,e),yield r.updateCard(t)),s.removeCardEditMode(e)}))}}t.WordEditor=c},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TITLE_HEIGHT=t.INITIAL_STATE=t.SORT_ARROW=t.PLACE_FOR_ICON=t.FAILURE_AUDIO_SRC=t.SUCCESS_AUDIO_SRC=t.CORRECT_AUDIO_SRC=t.ERROR_AUDIO_SRC=t.PLAY_MODE=t.TRAIN_MODE=t.CONTROL_PAGE=t.STATISTICS_PAGE=t.TRAIN_DIFFICULT_PAGE=t.MAIN_PAGE=t.TRUE_PER_COUNT=t.FALSE_COUNT=t.TRUE_COUNT=t.TRAIN_COUNT=t.CARDS_STORAGE=t.CATEGORIES_STORAGE=t.BASE_URL=t.PASSWORD=t.LOGIN=t.ACCESS_TOKEN_KEY=t.CLASS_NAMES=void 0,t.CLASS_NAMES={categoryCard:"category-card",updateBtn:"category-card__update-btn",addWordBtn:"category-card__add-word-btn",createBtn:"category-card__create-btn",cancelBtn:"category-card__cancel-btn",deleteBtn:"category-card__delete-btn",nameInput:"category-card__input",categoryName:"category-card__title",wordCard:"word-card",audio:"word-card__audio",image:"word-card__image",word:"word-card__word",translation:"word-card__translation",changeBtn:"word-card__change-btn",wordCancelBtn:"word-card__cancel-btn",wordDeleteBtn:"word-card__delete-btn",saveBtn:"word-card__save-btn"},t.ACCESS_TOKEN_KEY="accessToken",t.LOGIN="admin",t.PASSWORD="admin",t.BASE_URL="https://alluring-glacier-28316.herokuapp.com",t.CATEGORIES_STORAGE="efkCategories",t.CARDS_STORAGE="efkCards",t.TRAIN_COUNT="TRAIN_COUNT",t.TRUE_COUNT="TRUE_COUNT",t.FALSE_COUNT="FALSE_COUNT",t.TRUE_PER_COUNT="TRUE_PER_COUNT",t.MAIN_PAGE="main",t.TRAIN_DIFFICULT_PAGE="train",t.STATISTICS_PAGE="statistics",t.CONTROL_PAGE="categories",t.TRAIN_MODE="train-mode",t.PLAY_MODE="play-mode",t.ERROR_AUDIO_SRC="https://res.cloudinary.com/naidenav/video/upload/v1625392328/efk-files/audio/error_sh2l3u.mp3",t.CORRECT_AUDIO_SRC="https://res.cloudinary.com/naidenav/video/upload/v1625392326/efk-files/audio/correct_rdfl23.mp3",t.SUCCESS_AUDIO_SRC="https://res.cloudinary.com/naidenav/video/upload/v1625392335/efk-files/audio/success_gye62h.mp3",t.FAILURE_AUDIO_SRC="https://res.cloudinary.com/naidenav/video/upload/v1625392328/efk-files/audio/failure_j2ezli.mp3",t.PLACE_FOR_ICON=34,t.SORT_ARROW='\n  <div class="sort-arrow"></div>\n',t.INITIAL_STATE={mode:t.TRAIN_MODE,page:t.MAIN_PAGE,currentCard:null,isGameStarted:!1,isBreak:!1,mistakes:0,isAdmin:!1},t.TITLE_HEIGHT="25%"},607:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),n(387);const r=n(752),o=n(252);window.onload=()=>i(void 0,void 0,void 0,(function*(){const e=yield o.getAllCategories();new r.App(document.body,e)}))},140:(e,t,n)=>{e.exports=n.p+"assets/f05c5a951af13ccd286b.jpg"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n(607)})();